<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async/Await sin Promesas</title>
</head>

<body>

    <script>
        // Al cargar el DOM
        document.addEventListener("DOMContentLoaded", () => {

            // Funci贸n async que simula la descarga de un usuario
            async function obtenerUsuario(id) {
                const tiempo = Math.floor(Math.random() * 3000) + 1000; // 1-4 segundos

                // Simula el retardo usando await sobre setTimeout envuelto en una promesa
                await esperar(tiempo);

                console.log(`Usuario ${id} obtenido en ${tiempo} ms`);
                return { id, nombre: `Usuario${id}` };
            }

            // Funci贸n auxiliar async para esperar
            async function esperar(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            // Funci贸n principal para obtener los usuarios uno por uno
            async function obtenerUsuariosSecuencialmente() {
                console.log("Solicitando usuarios uno por uno...");

                const usuarios = [];

                for (let id = 1; id <= 5; id++) {
                    const usuario = await obtenerUsuario(id);
                    usuarios.push(usuario);
                }

                console.log("Todos los usuarios fueron obtenidos (en orden):");
                usuarios.forEach(usuario => {
                    console.log(`ID: ${usuario.id}, Nombre: ${usuario.nombre}`);
                });
            }

            // Ejecutamos la funci贸n principal
            obtenerUsuariosSecuencialmente();
        });
    </script>

</body>

</html>
